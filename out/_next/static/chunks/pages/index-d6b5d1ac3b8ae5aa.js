(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return i(6616)}])},6616:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return w}});var n=i(5893),s=i(7294),l=i(2293),a=i(7357),r=i(155),d=i(5861),c=i(3321),o=i(3457),h=i(480),f=i(629),p=i(2901),x=i(89),u=i(5071),b=i(1016);let m=i(8998),v=["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080"],j=0,y={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},T=e=>{let{timeline:t,pidList:i,colors:l,eventsTypes:a}=e,[r,d]=s.useState([]),[c,f]=s.useState({}),p=e=>{let t=[...r];if(t.includes(e)){var i=t.indexOf(e);-1!==i&&t.splice(i,1)}else t.push(e);d(t)};return(0,n.jsxs)(s.Fragment,{children:[(0,n.jsx)("div",{style:{alignContent:"center",display:"flex",justifyContent:"center"},children:(0,n.jsx)(o.Z,{row:!0,children:a.map(e=>(0,n.jsx)(h.Z,{style:{borderStyle:"solid",borderColor:l[e],paddingLeft:10,paddingRight:10,margin:5,display:"inline"},control:(0,n.jsx)(u.Z,{}),label:e,checked:r.includes(e),onChange:t=>{p(e)}},e))})}),(0,n.jsxs)("div",{style:{overflow:"scroll",width:"100%"},children:["Timeline contains ".concat(t.length," events"),i.map(e=>(0,n.jsxs)("div",{style:{display:"flex"},children:[(0,n.jsx)("div",{style:{width:100},children:e}),(0,n.jsx)("div",{children:t.map(t=>{if(r.includes(t.eventType))return t.pid==e?(0,n.jsx)("span",{onClick:()=>f(t),style:{borderStyle:c===t?"solid":void 0,borderWidth:2,borderColor:c===t?l[t.eventType]:void 0,padding:2,cursor:"pointer",marginRight:2,backgroundColor:c===t?"black":l[t.eventType]},children:"\xa0"}):(0,n.jsx)("span",{style:{padding:2,marginRight:2},children:"\xa0"})})})]},e))]}),(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsx)("h3",{children:"Selected Event"}),(0,n.jsx)(b.L,{theme:y,invertTheme:!0,data:c})]})]})},g=e=>{let{timeline:t,pidList:i,colors:l,eventsTypes:a}=e,[r,d]=s.useState({}),[x,v]=s.useState(!1),j=s.useRef();return(0,n.jsxs)(f.Z,{sx:{margin:5,padding:2},elevation:5,children:[(0,n.jsx)(T,{timeline:t,pidList:i,colors:l,eventsTypes:a}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"Query"}),(0,n.jsx)("b",{children:"Cheatsheet"})," ",(0,n.jsx)("br",{}),"Compilation time: ",(0,n.jsx)("b",{children:'$sum(timeline[eventType="pirCompilation"].time)'})," ",(0,n.jsx)("br",{}),"Number of X events: ",(0,n.jsx)("b",{children:'$sum(timeline[eventType="X"])'})," ",(0,n.jsx)("br",{}),"Number of X events for where M=V: ",(0,n.jsx)("b",{children:'$sum(timeline[eventType="X" and M="V"])'})," ",(0,n.jsx)("br",{}),"Give list of dispatch events that happend for before this compilation:",(0,n.jsxs)("b",{children:["timeline[timestamp ","<",' TIMESTAMP and eventType="dispatch" and hast="HAST"]']})," ",(0,n.jsx)("br",{}),"See all dispatch events leading up to a compilation",(0,n.jsx)("b",{children:'$sort(timeline[timestamp <= 1679782893927526000 and eventType!="l2check"  and hast="NS:base:13807296501490167129"], function($l, $r) {   $l.timestamp > $r.timestamp })'})," ",(0,n.jsx)("br",{}),(0,n.jsx)("b",{children:'$sort(timeline[timestamp >= 1679782923452549000 and eventType!="l2check" and vtab="0x564e53471580"], function($l, $r) { $l.timestamp > $r.timestamp })'}),(0,n.jsx)(p.Z,{fullWidth:!0,label:"Query",inputRef:j}),(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(h.Z,{control:(0,n.jsx)(u.Z,{}),label:"Show Auxiliary Timeline",checked:x,onChange:e=>{v(!x)}}),(0,n.jsx)(c.Z,{onClick:()=>{(async()=>{v(!1);try{let e=m(j.current.value),i=await e.evaluate({timeline:t});d(i)}catch(e){d(e)}})()},variant:"text",children:"Execute"})]}),x&&(0,n.jsx)(T,{timeline:r,pidList:i,colors:l,eventsTypes:a}),(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsx)("h3",{children:"Query Result"}),(0,n.jsx)(b.L,{theme:y,invertTheme:!0,data:r})]})]}),(0,n.jsx)("div",{})]})};function w(){let[e,t]=s.useState([]),[i,o]=s.useState([]),[h,f]=s.useState([]),[p,u]=s.useState({}),[b,m]=s.useState([]),y=e=>{let t={},i={},n=[],s=[],l=[];e.forEach((e,a)=>{e.eventType in i||(i[e.eventType]=v[j++],n.push([e.eventType,i[e.eventType]]),l.push(e.eventType)),e.pid in t||(s.push(e.pid),t[e.pid]=1)}),o(s),f(n),u(i),m(l)};return(0,n.jsxs)("div",{children:[(0,n.jsx)(a.Z,{sx:{flexGrow:1},children:(0,n.jsx)(l.Z,{position:"static",children:(0,n.jsxs)(r.Z,{children:[(0,n.jsx)(d.Z,{variant:"h6",component:"div",sx:{flexGrow:1},children:"General Event Query Engine"}),(0,n.jsx)(x.Z,{type:"file",label:"Upload",accept:".csv",onChange:function(e){var i=e.target.files[0],n=new FileReader;n.onload=function(e){var i=n.result;let s=JSON.parse(i);t(s),y(s)},n.readAsText(i)}}),(0,n.jsx)(c.Z,{onClick:()=>y(e),color:"inherit",children:"Refresh Colors"})]})})}),(0,n.jsx)(g,{timeline:e,pidList:i,colorsList:h,colors:p,eventsTypes:b})]})}}},function(e){e.O(0,[552,930,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);